(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e6f89d3"],{3903:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("f-panel",{class:t.b(),scopedSlots:t._u([{key:"body",fn:function(e){return n("div",{},[n("Table",{staticClass:"f-table",attrs:{size:"small",height:e.bodyHeight,border:"",stripe:"",loading:t.loading,data:t.data,columns:t.columns}}),n("Modal",{attrs:{title:"add"==t.action?"新增用户":"编辑用户"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("Form",{ref:"form",attrs:{model:t.model,rules:t.rules,"label-width":75}},[n("Row",[n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:"姓",prop:"firstname"}},[n("Input",{attrs:{placeholder:"请输入姓氏"},model:{value:t.model.firstname,callback:function(e){t.$set(t.model,"firstname",e)},expression:"model.firstname"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:"名",prop:"lastname"}},[n("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.model.lastname,callback:function(e){t.$set(t.model,"lastname",e)},expression:"model.lastname"}})],1)],1),n("i-col",{attrs:{span:24}},[n("FormItem",{attrs:{label:"帐号",prop:"id"}},[n("Input",{attrs:{disabled:"edit"==t.action,placeholder:"请输入帐号"},model:{value:t.model.id,callback:function(e){t.$set(t.model,"id",e)},expression:"model.id"}})],1)],1),n("i-col",{attrs:{span:24}},[n("FormItem",{attrs:{label:"密码",prop:"password"}},[n("Input",{attrs:{placeholder:"请输入密码"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),n("Button",{attrs:{loading:t.loading,icon:"md-checkmark",type:"primary"},on:{click:t.onSubmit}},[t._v("确认")])],1)],1)],1)}}])},[n("div",{attrs:{slot:"header"},slot:"header"},[n("f-filter",{attrs:{list:t.filters}},[n("div",{attrs:{slot:"buttons"},slot:"buttons"},[n("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:t.onAdd}},[t._v("用户")])],1)])],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("f-page",{attrs:{total:t.total,current:t.query.page},on:{"update:current":function(e){return t.$set(t.query,"page",e)},"on-page-change":t.onPageChange,"on-size-change":t.onSizeChange}})],1)])},i=[],o=n("7b36"),r=n("780a"),s=Object(r["a"])("client_user"),l=n("a9b3"),c=function(){return{firstname:null,lastname:null,id:null,password:null}},d={name:"p-user",mixins:[l["a"]],data:function(){var t=this;return{loading:!1,total:0,data:[],dialog:!1,action:"add",model:c(),rules:Object(o["b"])(["lastname","firstname","id","password"]),columns:[{type:"index",align:"center",width:60},{title:"帐号",key:"id",width:120},{title:"姓名",key:"name",width:100,render:function(t,e){var n=e.row;return t("div",n.firstname+n.lastname)}},{title:"密码",key:"password",width:120},{title:" ",minWidth:1},{title:"操作",width:120,align:"center",fixed:"right",render:function(e,n){var a=n.row;return Object(o["c"])(e,[{name:"edit",click:function(){return t.onEdit(a)}},{name:"delete",click:function(){return t.onDel(a)}}])}}],query:{page:1,size:20},filters:[{type:"input",field:"title",placeholder:"请输入帐号模糊查询",name:"帐号"}]}},methods:{reset:function(){this.query.page=1,this.render()},render:function(){var t=this;this.loading=!0,s.findAll(this.query).then(function(e){t.total=parseInt(e.count),t.data=e.data,t.loading=!1})},onPageChange:function(t){this.query.page=t,this.render()},onSizeChange:function(t){this.query.size=t,this.render()},onAdd:function(){this.action="add",this.dialog=!0,this.model=c()},onEdit:function(t){this.action="edit",this.model=this._clone(c(),t),this.id=t.id,this.dialog=!0},onSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(e){var n=JSON.parse(JSON.stringify(t.model));t.loading=!0,"add"==t.action?s.add(n).then(function(e){t.$Message.success("新增成功！"),t.reset(),t.dialog=!1}).catch(function(e){t.loading=!1}):(delete n.id,s.update(t.id,n).then(function(e){t.$Message.success("更新成功！"),t.reset(),t.dialog=!1}).catch(function(e){t.loading=!1}))}})},onDel:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要删除用户【".concat(t.id,"】吗？"),onOk:function(){e.loading=!0,s.remove(t.id).then(function(t){e.$Message.success("删除成功！"),e.render()})}})}},mounted:function(){this.render()}},u=d,f=(n("97c3"),n("2877")),m=Object(f["a"])(u,a,i,!1,null,null,null);e["default"]=m.exports},"97c3":function(t,e,n){"use strict";var a=n("ce32"),i=n.n(a);i.a},a9b3:function(t,e,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var a=n("bd86"),i=n("5880");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach(function(e){Object(a["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}e["a"]={computed:r({},Object(i["mapState"])(["windowHeight","winHeight","winWidth","windowWidth"]),{},Object(i["mapState"])("common",["areas"])),methods:{_clone:function(t,e){for(var n in e)n in t&&(t[n]=e[n]);return t}},mounted:function(){var t=this;this.baseTime&&clearInterval(this.baseTime),this.baseTime=setInterval(function(){t.busRun&&t.busRun.call(t)},3e4)},beforeDestroy:function(){clearInterval(this.baseTime)}}},ce32:function(t,e,n){}}]);